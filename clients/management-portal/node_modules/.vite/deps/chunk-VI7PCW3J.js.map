{
  "version": 3,
  "sources": ["../../vuetify/src/locale/adapters/vuetify.ts", "../../vuetify/src/composables/locale.ts"],
  "sourcesContent": ["// Composables\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { ref, shallowRef, watch } from 'vue'\nimport { consoleError, consoleWarn, getObjectValueByPath } from '@/util'\n\n// Locales\nimport en from '@/locale/en'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { LocaleInstance, LocaleMessages, LocaleOptions } from '@/composables/locale'\n\nconst LANG_PREFIX = '$vuetify.'\n\nconst replace = (str: string, params: unknown[]) => {\n  return str.replace(/\\{(\\d+)\\}/g, (match: string, index: string) => {\n    return String(params[+index])\n  })\n}\n\nconst createTranslateFunction = (\n  current: Ref<string>,\n  fallback: Ref<string>,\n  messages: Ref<LocaleMessages>,\n) => {\n  return (key: string, ...params: unknown[]) => {\n    if (!key.startsWith(LANG_PREFIX)) {\n      return replace(key, params)\n    }\n\n    const shortKey = key.replace(LANG_PREFIX, '')\n    const currentLocale = current.value && messages.value[current.value]\n    const fallbackLocale = fallback.value && messages.value[fallback.value]\n\n    let str: string = getObjectValueByPath(currentLocale, shortKey, null)\n\n    if (!str) {\n      consoleWarn(`Translation key \"${key}\" not found in \"${current.value}\", trying fallback locale`)\n      str = getObjectValueByPath(fallbackLocale, shortKey, null)\n    }\n\n    if (!str) {\n      consoleError(`Translation key \"${key}\" not found in fallback`)\n      str = key\n    }\n\n    if (typeof str !== 'string') {\n      consoleError(`Translation key \"${key}\" has a non-string value`)\n      str = key\n    }\n\n    return replace(str, params)\n  }\n}\n\nfunction createNumberFunction (current: Ref<string>, fallback: Ref<string>) {\n  return (value: number, options?: Intl.NumberFormatOptions) => {\n    const numberFormat = new Intl.NumberFormat([current.value, fallback.value], options)\n\n    return numberFormat.format(value)\n  }\n}\n\nfunction useProvided <T> (props: any, prop: string, provided: Ref<T>) {\n  const internal = useProxiedModel(props, prop, props[prop] ?? provided.value)\n\n  // TODO: Remove when defaultValue works\n  internal.value = props[prop] ?? provided.value\n\n  watch(provided, v => {\n    if (props[prop] == null) {\n      internal.value = provided.value\n    }\n  })\n\n  return internal as Ref<T>\n}\n\nfunction createProvideFunction (state: { current: Ref<string>, fallback: Ref<string>, messages: Ref<LocaleMessages> }) {\n  return (props: LocaleOptions): LocaleInstance => {\n    const current = useProvided(props, 'locale', state.current)\n    const fallback = useProvided(props, 'fallback', state.fallback)\n    const messages = useProvided(props, 'messages', state.messages)\n\n    return {\n      name: 'vuetify',\n      current,\n      fallback,\n      messages,\n      t: createTranslateFunction(current, fallback, messages),\n      n: createNumberFunction(current, fallback),\n      provide: createProvideFunction({ current, fallback, messages }),\n    }\n  }\n}\n\nexport function createVuetifyAdapter (options?: LocaleOptions): LocaleInstance {\n  const current = shallowRef(options?.locale ?? 'en')\n  const fallback = shallowRef(options?.fallback ?? 'en')\n  const messages = ref({ en, ...options?.messages })\n\n  return {\n    name: 'vuetify',\n    current,\n    fallback,\n    messages,\n    t: createTranslateFunction(current, fallback, messages),\n    n: createNumberFunction(current, fallback),\n    provide: createProvideFunction({ current, fallback, messages }),\n  }\n}\n", "// Utilities\nimport { computed, inject, provide, ref } from 'vue'\nimport { defaultRtl } from '@/locale'\nimport { createVuetifyAdapter } from '@/locale/adapters/vuetify'\n\n// Types\nimport type { InjectionKey, Ref } from 'vue'\n\nexport interface LocaleMessages {\n  [key: string]: LocaleMessages | string\n}\n\nexport interface LocaleOptions {\n  messages?: LocaleMessages\n  locale?: string\n  fallback?: string\n  adapter?: LocaleInstance\n}\n\nexport interface LocaleInstance {\n  name: string\n  messages: Ref<LocaleMessages>\n  current: Ref<string>\n  fallback: Ref<string>\n  t: (key: string, ...params: unknown[]) => string\n  n: (value: number) => string\n  provide: (props: LocaleOptions) => LocaleInstance\n}\n\nexport const LocaleSymbol: InjectionKey<LocaleInstance & RtlInstance> = Symbol.for('vuetify:locale')\n\nfunction isLocaleInstance (obj: any): obj is LocaleInstance {\n  return obj.name != null\n}\n\nexport function createLocale (options?: LocaleOptions & RtlOptions) {\n  const i18n = options?.adapter && isLocaleInstance(options?.adapter) ? options?.adapter : createVuetifyAdapter(options)\n  const rtl = createRtl(i18n, options)\n\n  return { ...i18n, ...rtl }\n}\n\nexport function useLocale () {\n  const locale = inject(LocaleSymbol)\n\n  if (!locale) throw new Error('[Vuetify] Could not find injected locale instance')\n\n  return locale\n}\n\nexport function provideLocale (props: LocaleOptions & RtlProps) {\n  const locale = inject(LocaleSymbol)\n\n  if (!locale) throw new Error('[Vuetify] Could not find injected locale instance')\n\n  const i18n = locale.provide(props)\n  const rtl = provideRtl(i18n, locale.rtl, props)\n\n  const data = { ...i18n, ...rtl }\n\n  provide(LocaleSymbol, data)\n\n  return data\n}\n\n// RTL\n\nexport interface RtlOptions {\n  rtl?: Record<string, boolean>\n}\n\nexport interface RtlProps {\n  rtl?: boolean\n}\n\nexport interface RtlInstance {\n  isRtl: Ref<boolean>\n  rtl: Ref<Record<string, boolean>>\n  rtlClasses: Ref<string>\n}\n\nexport const RtlSymbol: InjectionKey<RtlInstance> = Symbol.for('vuetify:rtl')\n\nexport function createRtl (i18n: LocaleInstance, options?: RtlOptions): RtlInstance {\n  const rtl = ref<Record<string, boolean>>(options?.rtl ?? defaultRtl)\n  const isRtl = computed(() => rtl.value[i18n.current.value] ?? false)\n\n  return {\n    isRtl,\n    rtl,\n    rtlClasses: computed(() => `v-locale--is-${isRtl.value ? 'rtl' : 'ltr'}`),\n  }\n}\n\nexport function provideRtl (locale: LocaleInstance, rtl: RtlInstance['rtl'], props: RtlProps): RtlInstance {\n  const isRtl = computed(() => props.rtl ?? rtl.value[locale.current.value] ?? false)\n\n  return {\n    isRtl,\n    rtl,\n    rtlClasses: computed(() => `v-locale--is-${isRtl.value ? 'rtl' : 'ltr'}`),\n  }\n}\n\nexport function useRtl () {\n  const locale = inject(LocaleSymbol)\n\n  if (!locale) throw new Error('[Vuetify] Could not find injected rtl instance')\n\n  return { isRtl: locale.isRtl, rtlClasses: locale.rtlClasses }\n}\n"],
  "mappings": "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",
  "names": ["LANG_PREFIX", "replace", "str", "params", "match", "index", "String", "createTranslateFunction", "current", "fallback", "messages", "key", "_len", "arguments", "length", "Array", "_key", "startsWith", "shortKey", "currentLocale", "value", "fallbackLocale", "getObjectValueByPath", "consoleWarn", "consoleError", "createNumberFunction", "options", "numberFormat", "Intl", "NumberFormat", "format", "useProvided", "props", "prop", "provided", "internal", "useProxiedModel", "watch", "v", "createProvideFunction", "state", "name", "t", "n", "provide", "createVuetifyAdapter", "shallowRef", "locale", "ref", "en", "LocaleSymbol", "Symbol", "for", "isLocaleInstance", "obj", "name", "createLocale", "options", "i18n", "adapter", "createVuetifyAdapter", "rtl", "createRtl", "useLocale", "locale", "inject", "Error", "RtlSymbol", "Symbol", "for", "createRtl", "i18n", "options", "rtl", "ref", "defaultRtl", "isRtl", "computed", "value", "current", "rtlClasses", "useRtl", "locale", "inject", "LocaleSymbol", "Error", "isRtl", "rtlClasses"]
}
